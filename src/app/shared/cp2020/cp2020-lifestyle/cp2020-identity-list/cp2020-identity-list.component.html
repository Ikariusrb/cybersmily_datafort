<div class="row">
  <div class="col">
    <div class="row">
      <div class="col">
        <h5 class="cp2020-label d-inline-block">Identities</h5>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-lg-6">
        <ng-container *ngFor="let id of firstColumn; let i = index" [ngTemplateOutlet]="cpIdentities" [ngTemplateOutletContext]="{id:id, index: getId(i, 1)}">
        </ng-container>
      </div>
      <div class="col-12 col-lg-6">
        <ng-container *ngFor="let id of secondColumn; let i = index" [ngTemplateOutlet]="cpIdentities" [ngTemplateOutletContext]="{id:id, index: getId(i, 2)}">
        </ng-container>
      </div>
    </div>
    <div class="row">
      <div class="col text-center">
        <fa-icon [icon]="faPlus" class="csd-icon-btn csd-btn" (click)="add()" title="Add new identity"></fa-icon>
      </div>
    </div>
  </div>
</div>

<ng-template #cpIdentities let-id="id" let-index="index">
  <div class="row ms-1 me-1" *ngIf="index === editIndex">
    <div class="col-7 g-0">
      <input [(ngModel)]="id.name" type="text" class="w-100" (change)="update(id, index)" placeholder="identity...">
    </div>
    <div class="col-1 g-0">
      <fa-icon [icon]="faSave" title="Edit identity" class="csd-icon-btn csd-btn ms-2" (click)="edit(-1)"></fa-icon>
    </div>
    <div class="col-4">
      <input [(ngModel)]="id.sin" type="text" (change)="update(id, index)" class="w-100" placeholder="sin...">
    </div>
    <div class="col-12">
      <textarea [(ngModel)]="id.desc" type="text" class="w-100" (change)="update(id, index)" placeholder="description..."></textarea>
    </div>
  </div>

  <div class="row ms-1 me-1"  *ngIf="index !== editIndex">
    <div class="col-8 g-0">{{(id.name === '') ? 'Identity-' + index : id.name}}
      <fa-icon [icon]="faPen" title="Edit identity" class="csd-icon-btn csd-btn ms-2" (click)="edit(index)"></fa-icon>
      <fa-icon [icon]="faTrash" title="Delete identity" class="csd-icon-btn csd-btn ms-2" (click)="delete(index)"></fa-icon>
    </div>
    <div class="col-4">{{id.sin}}</div>
    <div class="col-12">{{id.desc}}</div>
  </div>
</ng-template>
