<div class="row wpn-stats">
  <div class="col-3">{{weapon.count && weapon.count > 1 ? weapon.count + ' ': ''}}{{weapon.name}}
    <fa-icon [icon]="faTrash" (click)="delete()" class="csd-btn" title="Delete weapon"></fa-icon>
    <fa-icon [icon]="faPen" (click)="openModal(editWeaponModal)" class="mr-2 csd-btn" title="Edit weapon"></fa-icon>

  </div>
  <div class="col-1 text-center">{{weapon.type}}</div>
  <div class="col-1 text-center">{{weapon.wa}}
    <fa-icon *ngIf="weapon.name && weapon.name !==''"  [icon]="faDice" class="csd-dice" class="csd-dice" (click)="openModal(fireWeaponModal)" ></fa-icon>
  </div>
  <div class="col-1 text-center">{{weapon.conc}}</div>
  <div class="col-1 text-center">{{weapon.avail}} </div>
  <div class="col-2 text-center">{{weapon.damage}}
    <fa-icon *ngIf="weapon.damage && weapon.damage !== ''" [icon]="faDice" class="csd-dice" (click)="rollDamage()"
    [popover]="damageRoll" popoverTitle="DAMAGE RESULTS"  [outsideClick]="true"
    containerClass="csd-rounded csd-popover" ></fa-icon>
  </div>
  <div class="col-1 text-center">{{weapon.shots}}</div>
  <div class="col-1 text-center">{{weapon.rof}}</div>
  <div class="col-1 text-center wpn-rel">{{weapon.rel}}
    <fa-icon *ngIf="weapon.rel && weapon.rel !== ''" [icon]="faDice" class="csd-dice" (click)="rollReliability()"
    opoverTitle="Reliability Results"
    [popover]="(weapon.jammed)?'Weapon Jammed for ' + jammed + ' turns.' : 'Weapon is ok.'"
    containerClass="csd-rounded csd-popover" [outsideClick]="true"
    ></fa-icon>
  </div>
</div>
<div class="row wpn-notes">
  <ng-container *ngIf="weaponShots && weaponShots.length > 1">
  <div class="col-1"></div>
  <div class="col-2">
    shots ({{usedShots}}/{{weapon.shots}}):
  </div>
  <div class="col-9">
    <span class="wpn-shot" *ngFor="let shot of weaponShots;let i = index" (click)="checkShots(i)">{{ shot ? 'x' : ''}}</span>
  </div>
  </ng-container>
  <div class="col-1"></div>
  <div class="col-11">Notes: {{weapon.thrown ? 'Thrown weapon. ' : '' }}{{weapon.notes}}</div>
</div>

<ng-template #editWeaponModal>
  <div class="modal-header">
  <h4 class="modal-title pull-left">Edit Weapon</h4>
  <button type="button" class="close pull-right" aria-label="Close" (click)="closeModal()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body container">
  <cs-cp2020weapon-editor [weapon]="weapon" (updateWeapon)="update($event)"></cs-cp2020weapon-editor>
</div>
</ng-template>

<ng-template #fireWeaponModal>
  <div class="modal-header">
  <h4 class="modal-title pull-left">Use Weapon</h4>
  <button type="button" class="close pull-right" aria-label="Close" (click)="closeModal()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body container">
</div>
</ng-template>
